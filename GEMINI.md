# Gemini 開発メモ

このファイルは、AIアシスタントが "Trajectory" 開発プロジェクトを遂行する上での思考プロセス、計画、および進捗を記録するためのものです。

## 1. プロジェクト概要の理解

- **目的:** LLMとベクトル埋め込みを用いて議論の「軌跡」を可視化し、目的からの逸脱（脱線）をリアルタイムで検出・警告する。
- **対象:** 研究用途のlocalhost環境で動作するStreamlitアプリケーション。

## 2. 技術スタック

- **Language:** Python 3.10+
- **Frontend/App:** Streamlit
- **LLM:** OpenAI API (gpt-4o-mini)
- **Vector Store:** ChromaDB or FAISS (インメモリ)
- **Embedding:** OpenAI text-embedding-3-small
- **Visualization:** Plotly

## 3. 開発計画

`preStudy002.md`のフェーズに基づき、まずはCLIベースでのコアロジック検証から着手します。

### Phase 1: コアロジック検証 (CLIベース)

*   [x] 模擬議論ログを用いた「脱線」の定義とアノテーション作成
*   [x] Embedding + LLMによる脱線判定精度の検証（F1スコア計測）
*   [x] 判定ロジックの固定（プロンプトエンジニアリング含む）

### Phase 2: プロトタイプ実装 (Streamlit)

*   [x] Streamlitアプリケーションの基本構造をセットアップする。
*   [x] サイドバーにUIコントロール（データ選択、パラメータ調整）を配置する。
*   [x] 選択された議論データを読み込み、分析結果（類似度など）を計算する。
*   [x] メインエリアに分析結果をテキスト形式で表示する。
*   [x] 分析結果に基づいて、議論の流れを色分けして表示する（可視化Lv.1）。
*   [x] 分析実行ボタンを追加し、手動で分析をトリガーできるようにする。
*   [x] UI開発用のモックモードを追加する。

### Phase 3: 可視化高度化

*   [x] Mermaidフローチャートを生成し、議論の流れを可視化する。
*   [x] 次元削減または射影ロジックの実装（ベクトル→2次元座標）
*   [x] Plotlyによる「議論マップ」のリアルタイム描画（可視化Lv.2）
*   [c] 脱線アラートUIの実装 (Cancelled by user)